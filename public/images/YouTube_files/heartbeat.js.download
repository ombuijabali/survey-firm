(function(g){var window=this;'use strict';var lnZ=function(e,L){if(!Number.isFinite(e))return String(e);e=String(e);var c=e.indexOf(".");c===-1&&(c=e.length);var I=e[0]==="-"?"-":"";I&&(e=e.substring(1));return I+(0,g.PnJ)("0",Math.max(0,L-c))+e},PT7=function(){return{U:"svg",
N:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},L:[{U:"path",N:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}}]}},QXN=function(){return{U:"svg",
N:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},L:[{U:"path",N:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"}}]}},U3Z=function(e){typeof e==="number"?(this.date=d3M(e,0,1),AX(this,1)):g.Se(e)?(this.date=d3M(e.getFullYear(),e.getMonth(),e.getDate()),AX(this,e.getDate())):(this.date=new Date(g.O9()),e=this.date.getDate(),
this.date.setHours(0),this.date.setMinutes(0),this.date.setSeconds(0),this.date.setMilliseconds(0),AX(this,e))},d3M=function(e,L,c){L=new Date(e,L,c);
e>=0&&e<100&&L.setFullYear(L.getFullYear()-1900);return L},AX=function(e,L){e.getDate()!=L&&e.date.setUTCHours(e.date.getUTCHours()+(e.getDate()<L?1:-1))},FE=function(e,L){g.Lr.call(this,e,{U:"div",
W:"ytp-reminder-menu",N:{role:"menu",tabindex:"-1"},L:[{U:"div",W:"ytp-reminder-menu-contents",L:[{U:"div",W:"ytp-reminder-menu-items"}]}]},100,!0);this.X=L;this.Z=[];this.menuPopupRenderer=void 0;this.items=this.q0("ytp-reminder-menu-items");this.hide()},EWU=function(e){return(e.menuPopupRenderer&&e.menuPopupRenderer.items||[]).reduce(function(L,c){c&&c.menuServiceItemRenderer&&L.push(c.menuServiceItemRenderer);
return L},[])},b9=function(e){g.U.call(this,{U:"div",
L:[{U:"button",Rq:["ytp-offline-slate-button","ytp-button"],L:[{U:"div",W:"ytp-offline-slate-button-icon",aq:"{{icon}}"},{U:"div",W:"ytp-offline-slate-button-text",aq:"{{text}}"}]}]});this.V=e;this.upcomingEventReminderButtonRenderer=this.toggleButtonRenderer=null;this.K=void 0;this.G=this.X=null;(this.j=this.q0("ytp-offline-slate-button"))&&this.C(this.j,"click",this.T);this.hide()},K_N=function(e,L,c){!e.toggleButtonRenderer&&L&&L.toggleButtonRenderer?e.toggleButtonRenderer=L.toggleButtonRenderer:
L&&L.toggleButtonRenderer||(e.toggleButtonRenderer=null);
!e.upcomingEventReminderButtonRenderer&&c&&g.Q(c,XOL)?e.upcomingEventReminderButtonRenderer=g.Q(c,XOL):c&&g.Q(c,XOL)||(e.upcomingEventReminderButtonRenderer=null);i9(e)},i9=function(e){if(e.toggleButtonRenderer){var L=e.toggleButtonRenderer;
if(L.isToggled){var c=L.toggledText?g.o9(L.toggledText):"";e.update({text:c,icon:YO7(L.toggledIcon)})}else c=L.defaultText?g.o9(L.defaultText):"",e.update({text:c,icon:YO7(L.defaultIcon)});e.show()}else e.upcomingEventReminderButtonRenderer?(L=nWN(e))?(c=L.text?g.o9(L.text):"",e.update({text:c,icon:YO7(L.icon)}),e.show()):e.hide():e.hide()},L8N=function(e,L,c){e.G||(e.G=new g.pF(e.V.S().L6));
var I={context:g.c4(e.G.config_||g.LF())};g.qy()&&(I.context.clientScreenNonce=g.qy());I.params=c;g.$R(e.G,L,I,{timeout:5E3,onSuccess:function(){e.upcomingEventReminderButtonRenderer&&e.K&&(e.upcomingEventReminderButtonRenderer.currentState=e.K,e.K=void 0)},
onError:function(){e0L(e)},
onTimeout:function(){e0L(e)}})},e0L=function(e){e.toggleButtonRenderer?(e.toggleButtonRenderer.isToggled=!e.toggleButtonRenderer.isToggled,i9(e)):e.upcomingEventReminderButtonRenderer&&(e.K=void 0,i9(e))},YO7=function(e){if(!e)return null;
switch(e.iconType){case "NOTIFICATIONS":return PT7();case "NOTIFICATIONS_NONE":return QXN();case "NOTIFICATIONS_ACTIVE":return g.T1();default:return null}},nWN=function(e){if(!e.upcomingEventReminderButtonRenderer)return null;
var L=e.K||e.upcomingEventReminderButtonRenderer.currentState;e=g.f(e.upcomingEventReminderButtonRenderer.states||[]);for(var c=e.next();!c.done;c=e.next())if((c=g.Q(c.value,cyU))&&c.state===L&&c.button&&g.Q(c.button,g.E5))return g.Q(c.button,g.E5);return null},IlM=function(e){g.U.call(this,{U:"div",
W:"ytp-offline-slate",L:[{U:"div",W:"ytp-offline-slate-background"},{U:"div",W:"ytp-offline-slate-bar",L:[{U:"span",W:"ytp-offline-slate-icon",L:[{U:"svg",N:{fill:"#fff",height:"100%",viewBox:"0 0 24 24",width:"100%"},L:[{U:"path",N:{d:"M16.94 6.91l-1.41 1.45c.9.94 1.46 2.22 1.46 3.64s-.56 2.71-1.46 3.64l1.41 1.45c1.27-1.31 2.05-3.11 2.05-5.09s-.78-3.79-2.05-5.09zM19.77 4l-1.41 1.45C19.98 7.13 21 9.44 21 12.01c0 2.57-1.01 4.88-2.64 6.54l1.4 1.45c2.01-2.04 3.24-4.87 3.24-7.99 0-3.13-1.23-5.96-3.23-8.01zM7.06 6.91c-1.27 1.3-2.05 3.1-2.05 5.09s.78 3.79 2.05 5.09l1.41-1.45c-.9-.94-1.46-2.22-1.46-3.64s.56-2.71 1.46-3.64L7.06 6.91zM5.64 5.45L4.24 4C2.23 6.04 1 8.87 1 11.99c0 3.13 1.23 5.96 3.23 8.01l1.41-1.45C4.02 16.87 3 14.56 3 11.99s1.01-4.88 2.64-6.54z"}},
{U:"circle",N:{cx:"12",cy:"12",r:"3"}}]}]},{U:"span",W:"ytp-offline-slate-messages",L:[{U:"div",W:"ytp-offline-slate-main-text",N:{"aria-label":"{{label}}"},aq:"{{mainText}}"},{U:"div",W:"ytp-offline-slate-subtitle-text",aq:"{{subtitleText}}"}]},{U:"span",W:"ytp-offline-slate-buttons"}]},{U:"button",Rq:["ytp-offline-slate-close-button","ytp-button"],L:[g.R9()]},{U:"button",Rq:["ytp-offline-slate-open-button","ytp-button"],L:[g.hm()]}]});var L=this;this.api=e;this.X=this.K=null;this.background=this.q0("ytp-offline-slate-background");
this.Z=this.q0("ytp-offline-slate-bar");this.j=new g.j9(function(){g.Y4(L.Z,"ytp-offline-slate-bar-fade")},15E3);
this.T=!1;this.G=new g.j9(function(){g.Y4(L.element,"ytp-offline-slate-collapsed")},15E3);
g.l(this,this.G);g.l(this,this.j);this.countdownTimer=new g.j9(this.It,1E3,this);this.C(e,"presentingplayerstatechange",this.Bf);this.C(e,"livestatedata",this.OW);this.C(this.q0("ytp-offline-slate-close-button"),"click",function(){g.Y4(L.element,"ytp-offline-slate-collapsed")});
this.C(this.q0("ytp-offline-slate-open-button"),"click",function(){g.eZ(L.element,"ytp-offline-slate-collapsed")});
this.hide();e=this.getVideoData();e.getPlayerResponse()&&(e=e.getPlayerResponse().playabilityStatus)&&this.OW(e);e=this.api.getPresentingPlayerType()===8&&!this.getVideoData().V2;var c=this.api.getPresentingPlayerType()===8;g.cY(this.element,"ytp-offline-slate-premiere-trailer",e);g.cY(this.element,"ytp-offline-slate-hide-background",c)},BqM=function(e,L,c){if(L){var I=L.subtitleText!=null?g.o9(L.subtitleText):"";
c=c?c:L.mainText!=null?g.o9(L.mainText):"";var B,x,S,h;L=(h=(B=L.mainText)==null?void 0:(x=B.accessibility)==null?void 0:(S=x.accessibilityData)==null?void 0:S.label)!=null?h:c;e.update({mainText:c,subtitleText:I,label:L});g.cY(e.element,"ytp-offline-slate-single-text-line",!I);g.cY(e.Z,"ytp-offline-slate-bar-hidden",!c&&!I)}},Gs=function(e,L){var c=(0,g.zI)();
this.trigger=e;this.X=L;this.Z=c},R0g=function(e){g.Vk.call(this,e);
var L=this;this.T=!1;this.J=0;this.B=!1;this.K=new g.j9(function(){x_L(L)},0);
this.X=this.heartbeatParams=null;this.G=!1;this.j=new g.wU(1E3,6E4,1);this.sequenceNumber=0;this.offlineSlate=null;this.pS=new g.pF(void 0);this.attestationResponse=Promise.resolve(void 0);this.D=Promise.resolve(void 0);this.utcOffsetMinutes=-(new U3Z).getTimezoneOffset();this.Z=new g.zn(this);g.l(this,this.K);g.l(this,this.Z);o69(this);S6e(this);this.Z.C(e,"heartbeatparams",this.lO);this.Z.C(e,"presentingplayerstatechange",this.lf);this.Z.C(e,"videoplayerreset",this.Hs);this.Z.C(e,g.jh("heartbeat"),
this.onCueRangeEnter);this.G&&this.X&&ryL(this,void 0,this.X);var c=new g.pC(1E3,0x7ffffffffffff,{priority:1,namespace:"heartbeat"}),I=new g.pC(0x8000000000000,0x8000000000000,{id:"stream_end",priority:1,namespace:"heartbeat"});e.Lb([c,I]);h0U(this)},h0U=function(e){var L=e.getVideoData();
!L.Y("use_rta_for_player")&&L.z6&&(L=L.botguardData)&&g.YB(L,e.player.S())},ucL=function(e){var L,c;
return g.Z(function(I){if(I.K==1)return g.a(I,g.CMn(),2);if(!I.X)return e.sequenceNumber>=3?I.return({error:"ATTESTATION_ERROR_VM_INTERNAL_ERROR"}):I.return(void 0);L=e.getVideoData();c={};return I.return(g.V4M((c.cpn=L.clientPlaybackNonce,c.encryptedVideoId=L.videoId||"",c),1500))})},o69=function(e){var L=e.getVideoData();
if(L.z6)if(L.Y("use_rta_for_player"))e.attestationResponse=ucL(e);else if(L=new g.jWf(L),g.ET.isInitialized()||e.sequenceNumber>=3){var c=Promise,I=c.resolve,B=null;if(L.videoData.er){var x=g.HRc(L);if(x){B={};var S={};x=x.split("&");x=g.f(x);for(var h=x.next();!h.done;h=x.next())h=h.value.split("="),h.length===2&&(S[h[0]]=h[1]);S.r1a&&(B.webResponse=S.r1a);S.r1c&&(B.error=tzZ[Number(S.r1c)]);B.challenge=L.videoData.er}}e.attestationResponse=I.call(c,B||void 0)}},O0w=function(e){var L=e.getVideoData();
if(!g.ZI(e.getVideoData())||L.Bl)return!1;if(L.B){e=L.B.flavor==="playready"&&L.Y("html5_innertube_heartbeats_for_playready");var c=L.B.flavor==="widevine"&&L.Y("html5_innertube_heartbeats_for_widevine");L=g.Il(L.B)&&L.Y("html5_innertube_heartbeats_for_fairplay");return!(e||c||L)}return!0},q67=function(e){if(O0w(e))return!!e.heartbeatParams;
var L=e.getVideoData();return!g.ZI(e.getVideoData())||L.aF||L.Ez?!!L.heartbeatToken:!1},g6=function(e,L){if(!e.K.isActive()&&e.T){var c=e.getVideoData();
if(q67(e)||c.isLivePlayback){if(L===void 0)if(e.B)if(e.G)L=7500;else{var I;L=((I=e.heartbeatParams)==null?0:I.interval)?e.heartbeatParams.interval*1E3:e.getVideoData().fP||6E4}else L=1E3;e.K.start(L)}}},z0g=function(e,L,c){L.X8&&(c=g.WO(c,{internalipoverride:L.X8}));
var I={cpn:L.clientPlaybackNonce};L.contextParams&&(I.context_params=L.contextParams);L.RI&&(I.kpt=L.RI);c=g.WO(c,I);g.W3(c,{format:"RAW",method:"GET",timeout:3E4,onSuccess:function(B){if(!e.K.isActive()&&kU(e)){e.j.reset();e.sequenceNumber++;B=B.responseText;var x=TqU(B);if(x){e.player.fS("onHeartbeat",x);var S=x.status==="ok"?x.stop_heartbeat?2:0:x.status==="stop"?1:x.status==="live_stream_offline"?0:-1}else S=(S=B.match(W8M))?S[1]==="0"?0:1:-1;Mzw(e,void 0,x,B,S)}},
onError:function(B){kU(e)&&Dq(e,!0,"net-"+B.status)},
onTimeout:function(){kU(e)&&Dq(e,!0,"timeout")},
withCredentials:!0})},x_L=function(e){var L,c;
g.Z(function(I){L=e.player.S();c=e.getVideoData();if(!kU(e))return I.return();if(O0w(e))return sS9(e,L,c),I.Iq(0);o69(e);return g.a(I,v6N(e,L,c),0)})},sS9=function(e,L,c){var I;
if((I=e.heartbeatParams)!=null&&I.url){var B=g.WO(e.heartbeatParams.url,{request_id:g.Gwv()});c.Ve&&(B=g.WO(B,{vvt:c.Ve}),c.mdxEnvironment&&(B=g.WO(B,{mdx_environment:c.mdxEnvironment})));g.bj(L,c.oauthToken).then(function(x){x&&(B=g.WO(B,{access_token:x}));z0g(e,c,B)})}},kU=function(e){var L=e.getVideoData();
return e.player.getPresentingPlayerType()===3||g.E(e.player.getPlayerStateObject(e.getPlayerType()),4)?!1:q67(e)||L.isLivePlayback?!0:(w6(e),!1)},v6N=function(e,L,c){var I,B,x,S,h,R,u,t,O,q,T,W,A,b,J,w,C,y,P,ev;
return g.Z(function(X){if(X.K==1)return I="player/heartbeat",x={videoId:c.videoId,sequenceNumber:e.sequenceNumber,heartbeatServerData:(B=e.h7)!=null?B:c.heartbeatServerData},e.D=e.attestationResponse,c.z6?g.a(X,e.D,3):X.Iq(2);X.K!=2&&(x.attestationResponse=X.X);S=g.zC(c);R=(h=S.client)!=null?h:{};R.utcOffsetMinutes=e.utcOffsetMinutes;x.context=S;x.cpn=c.clientPlaybackNonce;if(u=typeof Intl!=="undefined"?(new Intl.DateTimeFormat).resolvedOptions().timeZone:null)R.timeZone=u;t={heartbeatChecks:[]};
if(O=c.getPlayerResponse())c.heartbeatToken&&(x.heartbeatToken=c.heartbeatToken),(q=O.playabilityStatus)&&(T=q.liveStreamability)&&T.liveStreamabilityRenderer&&t.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_LIVE_STREAM_STATUS");c.heartbeatToken&&t.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_YPC");g.rw(L)&&(t.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_UNPLUGGED"),W=flM(e),A={},W!==null&&(A.clientPlayerPositionUtcMillis=W),J=(b=e.player.qx())==null?void 0:g.HQ(b),C=((w=J)==null?void 0:w.freePreviewWatchedDuration)||
0,C>0&&(A.freePreviewWatchedDuration={seconds:""+C}),t.unpluggedParams=A);x.heartbeatRequestParams=t;c.isLivePlayback?(y=flM(e),y!==null&&(x.playbackState||(x.playbackState={}),x.playbackState.playbackPosition={utcTimeMillis:y})):L.Y("enable_heartbeat_vod_playback_position")&&(P=AyU(e),P!==null&&(x.playbackState||(x.playbackState={}),x.playbackState.playbackPosition={streamTimeMillis:P}));e.player.publish("heartbeatRequest",x);ev={timeout:3E4,onSuccess:function(oH){if(!e.K.isActive()&&kU(e)){var rc=
e.getVideoData(),Sv=rc.z6&&e.D==null,tJ;rc.z6=!((tJ=oH.heartbeatAttestationConfig)==null||!tJ.requiresAttestation)||Sv;Sv=oH.playabilityStatus;tJ=JSON.stringify(Sv)||"{}";oH.authenticationMismatch&&e.player.sW("authshear",{});var cM=-1;var JJ=oH.playabilityStatus;JJ&&(e.player.fS("onHeartbeat",JJ),JJ.status==="OK"?cM=oH.stopHeartbeat?2:0:JJ.status==="UNPLAYABLE"?cM=1:JJ.status==="LIVE_STREAM_OFFLINE"&&(cM=0));e.sequenceNumber&&cM===-1||e.j.reset();e.sequenceNumber++;oH.heartbeatServerData&&(e.h7=
oH.heartbeatServerData);rc.rf=oH;(JJ=oH.playerCueRangeSet)&&g.TN(rc,JJ);oH.playerCueRanges&&oH.playerCueRanges.length>0&&(rc.cueRanges=oH.playerCueRanges);var yr,cU;((yr=oH.progressBarConfig)==null?0:yr.progressBarStartPosition)&&((cU=oH.progressBarConfig)==null?0:cU.progressBarEndPosition)&&(rc.progressBarStartPosition=oH.progressBarConfig.progressBarStartPosition,rc.progressBarEndPosition=oH.progressBarConfig.progressBarEndPosition);rc.compositeLiveIngestionOffsetToken=oH.compositeLiveIngestionOffsetToken;
oH.compositeLiveStatusToken!==rc.compositeLiveStatusToken&&(rc.compositeLiveStatusToken=oH.compositeLiveStatusToken);rc.publish("dataupdated");Mzw(e,oH,Sv,tJ,cM)}},
onError:function(oH){kU(e)&&Dq(e,!0,"net-"+oH.status)},
onTimeout:function(){kU(e)&&Dq(e,!0,"timeout")}};
g.bj(L,g.xb(c)).then(function(oH){oH&&(ev.aV="Bearer "+oH);g.$R(e.pS,I,x,ev)});
g.AJ(X)})},Mzw=function(e,L,c,I,B){B===-1?(c="decode "+g.gR(I,3),Dq(e,!1,c)):B===2?(w6(e),e.B=!0):(e.J=0,e.K.stop(),B===1?(e.B=!1,c&&c.errorCode==="PLAYABILITY_ERROR_CODE_EMBARGOED"&&e.player.Hq(!0),B="pe."+(c==null?void 0:c.errorCode)+";ps."+(c==null?void 0:c.status),e.player.BM("heartbeat.stop",2,e.Ku(I),B),g.et("heartbeatActionPlayerHalted",F8e(c)),(L==null?0:L.videoTransitionEndpoint)&&c&&(L=L.videoTransitionEndpoint,(I=g.Q(L,g.MD))&&b07(e,I,c,{itct:L==null?void 0:L.clickTrackingParams}))):(e.B=
!0,I=0,e.G&&c&&(I=ryL(e,L,c),e.player.publish("livestatedata",c)),I?g6(e,I):g6(e)))},ryL=function(e,L,c){var I=c.liveStreamability&&c.liveStreamability.liveStreamabilityRenderer,B=!(!I||!(I.switchStreamsImmediately||I.transitionTiming&&I.transitionTiming==="STREAM_TRANSITION_TIMING_IMMEDIATELY"));
L=i0L(e,L,I);var x=e.getVideoData(),S=e.player.getPlayerStateObject(e.getPlayerType()),h=S.isPlaying()&&!g.QE(x)&&!e.player.isAtLiveHead(e.getPlayerType());if(x.S().oT()){var R,u=((R=e.player.Nw())==null?void 0:R.b5())||{};u.status=c.status||"";u.dvr=""+ +h;u["switch"]=""+ +B;u.ended=""+ +!(!I||!I.displayEndscreen);e.player.sW("heartbeat",u)}R=e.player.Y("always_cache_redirect_endpoint");if(h&&!B&&!R)return L;u=I&&I.streamTransitionEndpoint&&g.Q(I.streamTransitionEndpoint,g.MD);var t=I&&I.transitionTiming;
if(t==="STREAM_TRANSITION_TIMING_AT_STREAM_END")e.getVideoData().transitionEndpointAtEndOfStream=u;else if(R&&!u&&e.getVideoData().transitionEndpointAtEndOfStream)e.getVideoData().transitionEndpointAtEndOfStream=void 0;else if(!R&&u&&b07(e,u,c))return L;if(h&&!B&&R||R&&u&&(t==="STREAM_TRANSITION_TIMING_IMMEDIATELY"||t==="STREAM_TRANSITION_TIMING_UNSPECIFIED")&&b07(e,u,c))return L;if(c.status.toUpperCase()==="OK"){B=I&&I.broadcastId;h=e.X&&e.X.liveStreamability&&e.X.liveStreamability.liveStreamabilityRenderer&&
e.X.liveStreamability.liveStreamabilityRenderer.broadcastId;R=B!==h&&B!=null;if(!g.HN(x)||R){var O={video_id:x.videoId};x.sI&&(O.is_live_destination="1");O.disable_watch_next=!0;O.raw_watch_next_response=x.getWatchNextResponse();O.autonav_state=x.autonavState;O.oauth_token=x.oauthToken;O.JR=x.JR;x.j&&(O.vss_credentials_token=x.j,O.vss_credentials_token_type=x.Xd);x.Ve&&(O.vvt=x.Ve);I=void 0;g.HN(x)?R&&(I=new Gs("broadcastIdChanged",h+","+B),e.DQ("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_BROADCAST_ID_CHANGED",
c)):(B&&(I=new Gs("formatsReceived",""+B)),e.DQ("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_LIVE_STREAM_WENT_ONLINE",c));e.player.loadVideoByPlayerVars(O,void 0,void 0,void 0,I);return L}e.player.pu("heartbeat",e.getPlayerType())}I&&I.displayEndscreen&&(e.offlineSlate?(e=e.offlineSlate,e.T=!0,e.z_&&e.api.Tn()):S.isBuffering()&&(x=((O=e.player.Nw())==null?void 0:O.b5())||{},e.player.sW("hbse",x,!0),e.player.Tn(),e.player.fS("onLiveMediaEnded",c)));return L},i0L=function(e,
L,c){return e.player.Y("web_player_use_heartbeat_poll_delay_ms")&&(e=Number(L==null?void 0:L.pollDelayMs))?e:(c=Number(c==null?void 0:c.pollDelayMs))?c:0},Dq=function(e,L,c){if(!e.K.isActive()){e.K.stop();
e.J++;var I=L?"heartbeat.net":"heartbeat.servererror";var B=e.getVideoData();if(B.qd||L&&!g.ZI(e.getVideoData())&&!q67(e)&&B.isLivePlayback)B=!1;else{var x,S;((S=e.heartbeatParams)==null?0:S.retries)?x=e.heartbeatParams.retries:x=B.iA||5;B=e.J>=x}B?(g.et("heartbeatActionPlayerHalted",L?{enforcedPolicyToHaltOnNetworkFailure:!0}:F8e()),(L=e.getVideoData())&&L.isLivePlayback?e.player.BM(I,1,"Video playback interrupted. Please try again.",c):e.player.BM(I,1,"Sorry, there was an error licensing this video.",
c)):(g6(e,e.j.getValue()),g.Jx(e.j))}},F8e=function(e){var L={enforcedPolicyToHaltOnNetworkFailure:!1};
e&&(L.serializedServerContext=e.additionalLoggingData);return L},w6=function(e){e.J=0;
e.K.stop();e.B=!1;e.sequenceNumber=0},S6e=function(e){var L=e.getVideoData(),c=e.player.S();
if(L.isLivePlayback)if(g.MX(c.B)){e.G=!0;e.T=!0;if(!g.R2(c)||g.rw(c))e.offlineSlate=new IlM(e.player),g.l(e,e.offlineSlate),g.Uq(e.player,e.offlineSlate.element,4);(L=L.getPlayerResponse())&&L.playabilityStatus&&(e.X=L.playabilityStatus);var I;((I=e.X)==null?void 0:I.status)!=="UNPLAYABLE"&&(e.X?(I=i0L(e,void 0,e.X.liveStreamability&&e.X.liveStreamability.liveStreamabilityRenderer))?g6(e,I):g6(e,7500):g6(e,1E3))}else e.player.BM("html5.unsupportedlive",2,"HTML5_NO_AVAILABLE_FORMATS_FALLBACK","nolive.1");
else g.Fh(L.h7,"heartbeat")&&e.player.pu("heartbeat",e.getPlayerType())},b07=function(e,L,c,I){var B=L&&L.videoId;
return B?(e.player.zF(B,Object.assign({},{autonav:"1"},I||{}),void 0,!0,!0,L,g.xb(e.getVideoData())),e.DQ("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT",c),!0):!1},flM=function(e){return(e=e.player.getProgressState(e.getPlayerType()).ingestionTime)&&isFinite(e)?""+Math.floor(e*1E3):null},AyU=function(e){return(e=e.player.getCurrentTime(e.getPlayerType()))&&isFinite(e)?""+Math.floor(e*1E3):null},TqU=function(e){try{var L=JSON.parse(e);
return L!=null?L:void 0}catch(c){}},GVg={ERAS:["BC",
"AD"],ERANAMES:["Before Christ","Anno Domini"],NARROWMONTHS:"JFMAMJJASOND".split(""),STANDALONENARROWMONTHS:"JFMAMJJASOND".split(""),MONTHS:"January February March April May June July August September October November December".split(" "),STANDALONEMONTHS:"January February March April May June July August September October November December".split(" "),SHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONESHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
WEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),STANDALONEWEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),STANDALONESHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),NARROWWEEKDAYS:"SMTWTFS".split(""),STANDALONENARROWWEEKDAYS:"SMTWTFS".split(""),SHORTQUARTERS:["Q1","Q2","Q3","Q4"],QUARTERS:["1st quarter","2nd quarter","3rd quarter","4th quarter"],AMPMS:["AM","PM"],DATEFORMATS:["EEEE, MMMM d, y",
"MMMM d, y","MMM d, y","M/d/yy"],TIMEFORMATS:["h:mm:ss\u202fa zzzz","h:mm:ss\u202fa z","h:mm:ss\u202fa","h:mm\u202fa"],DATETIMEFORMATS:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],FIRSTDAYOFWEEK:6,WEEKENDRANGE:[5,6],FIRSTWEEKCUTOFFDAY:5},g6e=GVg;g6e=GVg;
var tzZ=["ATTESTATION_ERROR_UNKNOWN","ATTESTATION_ERROR_VM_NOT_INITIALIZED","ATTESTATION_ERROR_VM_NO_RESPONSE","ATTESTATION_ERROR_VM_TIMEOUT","ATTESTATION_ERROR_VM_INTERNAL_ERROR"],kVh={300:"STREAMING_DEVICES_QUOTA_PER_24H_EXCEEDED",301:"ALREADY_PINNED_ON_A_DEVICE",303:"STOPPED_BY_ANOTHER_PLAYBACK",304:"TOO_MANY_STREAMS_PER_USER",305:"TOO_MANY_STREAMS_PER_ENTITLEMENT",400:"VIDEO_NOT_FOUND",401:"GEO_FAILURE",402:"STREAMING_NOT_ALLOWED",403:"UNSUPPORTED_DEVICE",405:"VIDEO_FORBIDDEN",500:"PURCHASE_NOT_FOUND",
501:"RENTAL_EXPIRED",502:"PURCHASE_REFUNDED",5E3:"BAD_REQUEST",5001:"CGI_PARAMS_MISSING",5002:"CGI_PARAMS_MALFORMED",5100:"AUTHENTICATION_MISSING",5101:"AUTHENTICATION_MALFORMED",5102:"AUTHENTICATION_EXPIRED",5200:"CAST_TOKEN_MALFORMED",5201:"CAST_TOKEN_EXPIRED",5202:"CAST_TOKEN_FAILED",5203:"CAST_SESSION_VIDEO_MISMATCHED",5204:"CAST_SESSION_DEVICE_MISMATCHED",6E3:"INVALID_DRM_MESSAGE",7E3:"SERVER_ERROR",8E3:"RETRYABLE_ERROR"};g.M=U3Z.prototype;g.M.V_=g6e.FIRSTDAYOFWEEK;g.M.jC=g6e.FIRSTWEEKCUTOFFDAY;
g.M.clone=function(){var e=new U3Z(this.date);e.V_=this.V_;e.jC=this.jC;return e};
g.M.getFullYear=function(){return this.date.getFullYear()};
g.M.getYear=function(){return this.getFullYear()};
g.M.getMonth=function(){return this.date.getMonth()};
g.M.getDate=function(){return this.date.getDate()};
g.M.getTime=function(){return this.date.getTime()};
g.M.getDay=function(){return this.date.getDay()};
g.M.getUTCFullYear=function(){return this.date.getUTCFullYear()};
g.M.getUTCMonth=function(){return this.date.getUTCMonth()};
g.M.getUTCDate=function(){return this.date.getUTCDate()};
g.M.getUTCDay=function(){return this.date.getDay()};
g.M.getUTCHours=function(){return this.date.getUTCHours()};
g.M.getUTCMinutes=function(){return this.date.getUTCMinutes()};
g.M.getTimezoneOffset=function(){return this.date.getTimezoneOffset()};
g.M.set=function(e){this.date=new Date(e.getFullYear(),e.getMonth(),e.getDate())};
g.M.setFullYear=function(e){this.date.setFullYear(e)};
g.M.setYear=function(e){this.setFullYear(e)};
g.M.setMonth=function(e){this.date.setMonth(e)};
g.M.setDate=function(e){this.date.setDate(e)};
g.M.setTime=function(e){this.date.setTime(e)};
g.M.setUTCFullYear=function(e){this.date.setUTCFullYear(e)};
g.M.setUTCMonth=function(e){this.date.setUTCMonth(e)};
g.M.setUTCDate=function(e){this.date.setUTCDate(e)};
g.M.add=function(e){if(e.years||e.months){var L=this.getMonth()+e.months+e.years*12,c=this.getYear()+Math.floor(L/12);L%=12;L<0&&(L+=12);a:{switch(L){case 1:var I=c%4!=0||c%100==0&&c%400!=0?28:29;break a;case 5:case 8:case 10:case 3:I=30;break a}I=31}I=Math.min(I,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(L);this.setDate(I)}e.days&&(c=this.getYear(),L=c>=0&&c<=99?-1900:0,e=new Date((new Date(c,this.getMonth(),this.getDate(),12)).getTime()+e.days*864E5),this.setDate(1),this.setFullYear(e.getFullYear()+
L),this.setMonth(e.getMonth()),this.setDate(e.getDate()),AX(this,e.getDate()))};
g.M.equals=function(e){return!(!e||this.getYear()!=e.getYear()||this.getMonth()!=e.getMonth()||this.getDate()!=e.getDate())};
g.M.toString=function(){var e=this.getFullYear(),L=e<0?"-":e>=1E4?"+":"";return[L+lnZ(Math.abs(e),L?6:4),lnZ(this.getMonth()+1,2),lnZ(this.getDate(),2)].join("")+""};
g.M.valueOf=function(){return this.date.valueOf()};var D_9=new g.MN("addUpcomingEventReminderEndpoint");var wsw=new g.MN("removeUpcomingEventReminderEndpoint");var Jyg=new g.MN("updateUpcomingEventReminderButtonStateCommand");var XOL=new g.MN("upcomingEventReminderButtonRenderer"),cyU=new g.MN("upcomingEventReminderButtonStateRenderer");g.z(FE,g.Lr);
FE.prototype.updateMenuItems=function(){var e=this,L=EWU(this),c=0;c=0;for(var I={};c<L.length;I={C3:void 0},c++){var B=this.Z[c];B||(B=new g.U({U:"div",W:"ytp-reminder-menu-item",N:{role:"menuitem",tabindex:"0"},L:[{U:"div",W:"ytp-reminder-menu-item-icon",aq:"{{icon}}"},{U:"div",W:"ytp-reminder-menu-item-label",aq:"{{text}}"}]}),I.C3=c,B.listen("click",function(S){return function(){var h=S.C3;e.y5();h=EWU(e)[h];e.publish("reminderMenuItemClicked",h.serviceEndpoint||h.command)}}(I)),B.jl(this.items),
this.Z[c]=B);
var x=L[c];I=null;switch(x.icon&&x.icon.iconType){case "NOTIFICATIONS":I=PT7();break;case "NOTIFICATIONS_NONE":I=QXN();break;case "NOTIFICATIONS_ACTIVE":I=g.T1()}x=x.text?g.o9(x.text):"";B.update({icon:I,text:x})}for(;c<this.Z.length;)this.Z.pop().dispose();c===0?this.y5():this.Fp(this.X)};
FE.prototype.hide=function(){this.X&&this.X.removeAttribute("aria-haspopup");g.Lr.prototype.hide.call(this)};
FE.prototype.show=function(){this.X&&this.X.setAttribute("aria-haspopup","true");g.Lr.prototype.show.call(this)};
FE.prototype.KS=function(){g.cs(this.Z);g.Lr.prototype.KS.call(this)};g.z(b9,g.U);
b9.prototype.T=function(){if(this.toggleButtonRenderer){var e=this.toggleButtonRenderer;e.isToggled?this.Z(e.toggledServiceEndpoint):this.Z(e.defaultServiceEndpoint);e.isToggled=!e.isToggled;i9(this)}else if(this.upcomingEventReminderButtonRenderer)if(this.X&&this.X.z_)this.X.y5();else{var L=nWN(this);L&&this.Z(L.serviceEndpoint||L.command);L=((e=g.Q(L==null?void 0:L.command,g.r9))==null?void 0:e.commands)||[];a:{e=g.f(L);for(var c=e.next();!c.done;c=e.next()){var I=L=void 0;if(c=(L=g.Q(c.value,g.nLw))==
null?void 0:(I=L.popup)==null?void 0:I.menuPopupRenderer){e=c;break a}}e=void 0}this.X||(this.X=new FE(this.V,this.j),this.X.jl(this.element),g.l(this,this.X),this.X.subscribe("reminderMenuItemClicked",this.Z,this));L=this.X;L.menuPopupRenderer=e;L.updateMenuItems()}};
b9.prototype.Z=function(e){var L=g.Q(e,D_9),c=g.Q(e,wsw);if(e&&(L||c)){if(L){var I=L;var B="notification/add_upcoming_event_reminder"}else c&&(I=c,B="notification/remove_upcoming_event_reminder");if(B&&I&&I.params)for(L8N(this,B,I.params),e=g.f(I.commands||[]),L=e.next();!L.done;L=e.next())if((L=L.value)&&g.Q(L,Jyg)){this.K=g.Q(L,Jyg).state;i9(this);break}}};g.z(IlM,g.U);g.M=IlM.prototype;g.M.getPlayerType=function(){if(this.api.getPresentingPlayerType()===8)return 1};
g.M.getVideoData=function(){return this.api.getVideoData(this.getPlayerType())};
g.M.OW=function(e){var L,c,I=e==null?void 0:(L=e.liveStreamability)==null?void 0:(c=L.liveStreamabilityRenderer)==null?void 0:c.offlineSlate;if(I){this.K=e;L=I.liveStreamOfflineSlateRenderer;L.canShowCountdown?this.It():BqM(this,L);var B,x,S,h;if(c=e==null?void 0:(B=e.liveStreamability)==null?void 0:(x=B.liveStreamabilityRenderer)==null?void 0:(S=x.offlineSlate)==null?void 0:(h=S.liveStreamOfflineSlateRenderer)==null?void 0:h.thumbnail){B=0;x=null;S=c.thumbnails;for(h=0;h<S.length;h++)S[h].width>
B&&(B=S[h].width||0,x=S[h].url);x&&(this.background.style.backgroundImage="url("+x+")")}else this.background.style.backgroundImage="";L.actionButtons||L.reminderButton?(this.X||(this.X=new b9(this.api),this.X.jl(this.q0("ytp-offline-slate-buttons")),g.l(this,this.X)),K_N(this.X,L.actionButtons&&L.actionButtons[0],L.reminderButton)):this.X&&K_N(this.X,null,null);this.K=e}else this.K=null;this.Bf()};
g.M.Bf=function(e){if(this.api.getPresentingPlayerType()===8)var L=!0;else{var c=this.api.getPlayerStateObject(),I=this.getVideoData();L=I.isLivePlayback&&(c.isBuffering()||g.E(c,2)||g.E(c,64));var B=I.autonavState===2&&g.E(c,2);c=c.isPlaying()&&!g.QE(I)&&!this.api.isAtLiveHead(void 0,!0);L=L&&!c&&!B}L&&this.K?this.z_?(e==null?0:g.or(e,2))&&!this.getVideoData().V2&&(g.eZ(this.element,"ytp-offline-slate-collapsed"),this.G.stop(),g.eZ(this.Z,"ytp-offline-slate-bar-fade"),this.j.start()):(this.show(),
this.G.start(),this.api.publish("offlineslatestatechange"),this.T&&this.api.Tn()):this.z_&&(this.hide(),this.api.publish("offlineslatestatechange"))};
g.M.It=function(){var e,L,c,I,B=(e=this.K)==null?void 0:(L=e.liveStreamability)==null?void 0:(c=L.liveStreamabilityRenderer)==null?void 0:(I=c.offlineSlate)==null?void 0:I.liveStreamOfflineSlateRenderer;B&&(e=Math.floor(g.O9()/1E3),L=B.canShowCountdown&&Number(B.scheduledStartTime),!L||L<=e?(BqM(this,B),this.countdownTimer.stop()):(BqM(this,B,g.Te(L-e)),g.HT(this.countdownTimer)))};
g.M.KS=function(){this.countdownTimer.dispose();this.countdownTimer=null;g.U.prototype.KS.call(this)};Gs.prototype.K=function(e){return this.trigger&&e.trigger?this.trigger===e.trigger&&this.X===e.X:!1};
Gs.prototype.isExpired=function(){return(0,g.zI)()-this.Z>6E4};
Gs.prototype.toString=function(){return"heartbeat:"+this.trigger+":"+this.X};g.z(R0g,g.Vk);g.M=R0g.prototype;g.M.KS=function(){w6(this);this.player.RU("heartbeat");g.Vk.prototype.KS.call(this)};
g.M.onCueRangeEnter=function(){this.T=!0;g6(this,2E3)};
g.M.lO=function(e){this.heartbeatParams=e;g6(this,2E3)};
g.M.lf=function(e){var L;this.player.getPresentingPlayerType()!==8&&((L=this.X)==null?void 0:L.status)!=="UNPLAYABLE"&&(g.E(e.state,2)||g.E(e.state,64)?(w6(this),this.G&&(this.T=!0,g6(this,1E3))):(g.E(e.state,1)||g.E(e.state,8))&&g6(this,2E3))};
g.M.Hs=function(){this.player.getPresentingPlayerType()!==3&&g6(this,2E3)};
g.M.getPlayerType=function(){if(this.player.getPresentingPlayerType()===8)return 1};
g.M.getVideoData=function(){return this.player.getVideoData(this.getPlayerType())};
g.M.bC=function(e){switch(e){case 4:case 3:return!1}return!0};
g.M.DQ=function(e,L,c){e={trigger:e,reason:L};c&&(e.serializedServerContext=c.additionalLoggingData);g.et("heartbeatActionPlayerTransitioned",e)};
g.M.Ku=function(e){var L="LICENSE",c=TqU(e);if(c)return c.reason||g.nm[L]||"";if(e=e.match(W8M))if(e=Number(e[1]))L=(L=kVh[e.toString()])?L:"LICENSE";return g.nm[L]||""};
g.M.fK=function(){return!!this.offlineSlate&&this.offlineSlate.z_};
var W8M=/^GLS\/1.0 (\d+) (\w+).*?\r\n\r\n([\S\s]*)$/;g.JK("heartbeat",R0g);})(_yt_player);
